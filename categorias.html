<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Categoria</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <h1 id="categoriaTitulo">Categoria</h1>
    </header>
    <div class="postagem">
        <h2>Nova Postagem</h2>
        <form id="postForm">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome">
            <label for="titulo">Título:</label>
            <input type="text" id="titulo" name="titulo" required>
            <label for="imagem">Imagem (URL):</label>
            <input type="text" id="imagem" name="imagem">
            <label for="comentario">Comentário:</label>
            <textarea id="comentario" name="comentario" required></textarea>
            <button type="submit">Postar</button>
        </form>
    </div>
    <div class="postagens">
        <h2>Postagens</h2>
        <div id="postagensLista">
            <!-- Postagens serão adicionadas aqui -->
            <!-- bomdia -->
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const postForm = document.getElementById('postForm');
            const postagensLista = document.getElementById('postagensLista');
            const categoriaTitulo = document.getElementById('categoriaTitulo');

            if (postForm && postagensLista && categoriaTitulo) {
                const params = new URLSearchParams(window.location.search);
                const categoriaNome = params.get('categoria');
                categoriaTitulo.textContent = categoriaNome;

                // Carregar postagens do localStorage
                const postagens = JSON.parse(localStorage.getItem('postagens')) || [];
                const postagensFiltradas = postagens.filter(post => post.categoria === categoriaNome);

                postagensFiltradas.forEach(post => {
                    const postagemDiv = document.createElement('div');
                    postagemDiv.className = 'postagem';

                    postagemDiv.innerHTML = `
                        <h3>${post.titulo}</h3>
                        <p><strong>${post.nome}</strong></p>
                        <p>${post.comentario}</p>
                        ${post.imagem_url ? `<img src="${post.imagem_url}" alt="Imagem da postagem">` : ''}
                        <!-- bomdia -->
                    `;

                    postagensLista.appendChild(postagemDiv);
                });

                // Adicionar nova postagem
                postForm.addEventListener('submit', function (event) {
                    event.preventDefault();

                    const novaPostagem = {
                        nome: postForm.nome.value || 'Anônimo',
                        titulo: postForm.titulo.value,
                        comentario: postForm.comentario.value,
                        imagem_url: postForm.imagem.value,
                        categoria: categoriaNome
                        // bomdia
                    };

                    postagens.push(novaPostagem);
                    localStorage.setItem('postagens', JSON.stringify(postagens));

                    const postagemDiv = document.createElement('div');
                    postagemDiv.className = 'postagem';

                    postagemDiv.innerHTML = `
                        <h3>${novaPostagem.titulo}</h3>
                        <p><strong>${novaPostagem.nome}</strong></p>
                        <p>${novaPostagem.comentario}</p>
                        ${novaPostagem.imagem_url ? `<img src="${novaPostagem.imagem_url}" alt="Imagem da postagem">` : ''}
                        <!-- bomdia -->
                    `;

                    postagensLista.appendChild(postagemDiv);
                });
            }
        });
    </script>
</body>
</html>
